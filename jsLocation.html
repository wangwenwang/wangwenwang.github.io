
<script type="text/javascript">
/**
*已调用百度地图，得到了百度定位的坐标，但是在安卓系统上相差一段距离
*得到的就是百度的坐标，不存在转坐标系的问题
*/


//用百度地图API获取坐标
var geolocation = new BMap.Geolocation();
geolocation.getCurrentPosition(function (r) {
    if (this.getStatus() == BMAP_STATUS_SUCCESS) {
        var lat = r.point.lat;
        var lng = r.point.lng;

        //地图初始化
        var map = new BMap.Map("allmap");
        var point = new BMap.Point(lng, lat);
        map.centerAndZoom(point, 15);
        map.addControl(new BMap.NavigationControl());
        map.enableScrollWheelZoom(true);

        var myIcon = new BMap.Icon(
            "E:/Web/webA/images/pushpin_1.png",
            new BMap.Size(25, 45),
            { offset: new BMap.Size(-20, 10) }
        );
        // var marker = new BMap.Marker(point);
        var marker = new BMap.Marker(point, { icon: myIcon });
        map.addOverlay(marker);
        var label = new BMap.Label("我的百度坐标", { offset: new     
                    BMap.Size(20, -10) });
        marker.setLabel(label);
    } else {
        alert('failed' + this.getStatus());
    }
}, { enableHighAccuracy: true })
</script>
